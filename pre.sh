#!/bin/bash

for file in *.csv
do
  base=`basename $file .csv`
  new=${base}_f.csv

  echo "Filtering $file to $new"

  cat $file | sed -e 's/^\(ROV[ ]Actions[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(HIGHLIGHTS[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(VEHICLE[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Elevator[ ]Ops[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(NAV[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(WATCH[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Other[ ]Samples[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Connection[ ]Status[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Biology[ ]Type[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Site[ ]Interactions[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Geologic[ ]Formations[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' | \
  sed -e 's/^\(Sample[ ]Type[,]\)\(["]["]["][a-zA-Z][^,]*\)\([,]\)\(.*\)\(["]["]["].*\)$/\1\2:\4\5/' > $new
done
